![License](https://img.shields.io/badge/License-MIT-blue.svg)
![Go version](https://img.shields.io/badge/Golang-1.23.6-blue)


# URL Shortener Service

üöÄ –°–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è URL-–∞–¥—Ä–µ—Å–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–¥–æ–≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö URL (—Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è + net/url)
- –ú–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Handler -> UseCase -> Service)
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —á–µ—Ä–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ä–æ—É—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∏ unit-—Ç–µ—Å—Ç–æ–≤


## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **–Ø–∑—ã–∫**: Go 1.21+
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: Gorilla Mux
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: go-playground/validator
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: logrus
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: testify + gomock
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
go mod download
go install go.uber.org/mock/gomock@latest
go install go.uber.org/mock/mockgen@v0.3.0
```

### –ó–∞–ø—É—Å–∫
```bash
go run cmd/main.go
```

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏:
```bash
curl -X POST http://localhost:8080/url \
  -H "Content-Type: application/json" \
  -d '{"original_url":"https://www.google.com"}'
```

–ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ URL:
```bash
curl -X GET http://localhost:8080/url \
  -H "Content-Type: application/json" \
  -d '{"code":"uO2_-PFG"}'
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
Unit-—Ç–µ—Å—Ç—ã:
```bash
go test -v ./internal/...
```

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:
```bash
go test -v ./tests/integration/...
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
1. **Handler** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ DTO
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

2. **UseCase** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–¥–æ–≤
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

3. **Service** - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
   - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- **Url** - –æ—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å:
  ```go
  type Url struct {
      Id       UrlId
      Original UrlOriginal
      Code     UrlCode
  }
  ```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ —Ç–∏–ø—ã:
```go
type UrlCode string // —Ñ–æ—Ä–º–∞—Ç: 8 —Å–∏–º–≤–æ–ª–æ–≤
type UrlOriginal string // –≤–∞–ª–∏–¥–Ω—ã–π URL
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–∫–æ–≤
```bash
mockgen -source=internal/usecase/url_usecase/usecase.go -destination=mocks/mock_service.go -package=mocks
```

